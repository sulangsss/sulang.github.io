<hr>
<p>title: Kubernetes kubectl<br>date: 2019-08-07 12:00:06<br>tags: </p>
<ul>
<li>Kubernetes</li>
<li>Command</li>
<li>kubectl<br>categories:</li>
<li>Kubernetes</li>
<li>Command</li>
</ul>
<hr>
<h3 id="Inspect"><a href="#Inspect" class="headerlink" title="Inspect"></a>Inspect</h3><h4 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h4><pre><code class="bash">kubectl describe node [NODE_NAME]
</code></pre>
<h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><h4 id="Proxy-Service"><a href="#Proxy-Service" class="headerlink" title="Proxy Service"></a>Proxy Service</h4><pre><code class="bash">kubectl port-forward $(kubectl get pod --selector=<span class="string">"label=value"</span> --output jsonpath=<span class="string">'{.items[0].metadata.name}'</span>) local_port:remote_port

<span class="comment"># kubectl port-forward $(kubectl get pod --selector="component=portal" --output jsonpath='{.items[0].metadata.name}') 9000:80</span>
</code></pre>
<h3 id="Label"><a href="#Label" class="headerlink" title="Label"></a>Label</h3><h4 id="Add-label-to-Node"><a href="#Add-label-to-Node" class="headerlink" title="Add label to Node"></a>Add label to Node</h4><pre><code class="bash">kubectl label nodes &lt;node-name&gt; &lt;label-key&gt;=&lt;label-value&gt;
</code></pre>
<p>exampleï¼š</p>
<pre><code class="bash">kubectl label nodes gke-xxx-cc361276-cvfg node=elasticsearch
</code></pre>
<h4 id="Remove-label-on-Node"><a href="#Remove-label-on-Node" class="headerlink" title="Remove label on Node"></a>Remove label on Node</h4><pre><code class="bash">kubectl label node node_name label_name-
</code></pre>
<h3 id="Taint"><a href="#Taint" class="headerlink" title="Taint"></a>Taint</h3><h4 id="Add-taint-to-Node"><a href="#Add-taint-to-Node" class="headerlink" title="Add taint to Node"></a>Add taint to Node</h4><pre><code class="bash">kubectl taint nodes node1 key1=value1:NoSchedule
kubectl taint nodes node1 key1=value1:NoExecute
kubectl taint nodes node1 key2=value2:NoSchedule
</code></pre>
<h4 id="Remove-taint-on-Node"><a href="#Remove-taint-on-Node" class="headerlink" title="Remove taint on Node"></a>Remove taint on Node</h4><pre><code class="bash">kubectl patch node node_name -p <span class="string">'{"spec":{"taints":[]}}'</span>
</code></pre>
